# Домашнее задание к занятию «Резервное копирование баз данных»


### Задание 1. Резервное копирование

### Кейс
Финансовая компания решила увеличить надёжность работы баз данных и их резервного копирования. 

Необходимо описать, какие варианты резервного копирования подходят в случаях: 

1.1. Необходимо восстанавливать данные в полном объёме за предыдущий день.

1.2. Необходимо восстанавливать данные за час до предполагаемой поломки.

1.3.* Возможен ли кейс, когда при поломке базы происходило моментальное переключение на работающую или починенную базу данных.

*Приведите ответ в свободной форме.*


### Решение 1

1.1. Резервное копирование за предыдущий день (полный объём данных):
Ежедневные полные резервные копии: создание полной копии БД ежедневно в определенное время (например, каждую ночь). Это позволяет восстанавливать данные в полном объеме за предыдущий день. При восстановлении данных необходимо использовать последнюю полную копию, сделанную на конец предыдущего дня.

1.2. Резервное копирование за час до поломки:
Тут применимы инкрементные резервные копии: создание полной копии базы данных в начале и последующие инкрементные копии каждый час. Инкрементные копии содержат только измененные данные с момента предыдущей полной или инкрементной копии. При восстановлении данных за час до поломки, можно использовать последнюю полную копию. Далее нужно применить все инкрементные копии, сделанные с момента этой полной копии до момента поломки.

1.3.* Моментальное переключение на работающую или починенную базу данных:
Репликация и HA кластеры: Для обеспечения мгновенного переключения на работающую базу данных можно использовать технологии репликации данных и HA кластеры. Например, можно настроить мастер-слейв репликацию, где основная (мастер) база данных реплицируется на несколько реплик (слейвов). В случае поломки мастер базы данных можно моментально переключить на одну из реплик, чтобы минимизировать время простоя. Также можно использовать кластеры с автоматическим обнаружением сбоев, которые автоматически перенаправляют запросы к базе данных на другие рабочие узлы в случае обнаружения сбоя в основном узле.

---

### Задание 2. PostgreSQL

2.1. С помощью официальной документации приведите пример команды резервирования данных и восстановления БД (pgdump/pgrestore).

2.1.* Возможно ли автоматизировать этот процесс? Если да, то как?

*Приведите ответ в свободной форме.*

---

### Задание 3. MySQL

3.1. С помощью официальной документации приведите пример команды инкрементного резервного копирования базы данных MySQL. 

3.1.* В каких случаях использование реплики будет давать преимущество по сравнению с обычным резервным копированием?

*Приведите ответ в свободной форме.*

---

Задания, помеченные звёздочкой, — дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже шире разобраться в материале.
